import{d as q,c as m,a as se,r as ie,o as v,b as E,w as le,e as re,f as ae,g as s,h as ce,i as de,t as h,v as ue,F as p,j as f,n as $,u as me,k as ve,l as L,m as A,p as pe,q as _e,s as $e}from"./vendor-dQFIhn2h.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const _ of d.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&l(_)}).observe(document,{childList:!0,subtree:!0});function g(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(a){if(a.ep)return;a.ep=!0;const d=g(a);fetch(a.href,d)}})();const fe={id:"app"},be=q({__name:"App",setup(C){return(i,g)=>{const l=ie("router-view");return v(),m("div",fe,[se(l)])}}}),he="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%203C4.5%203%201.73%205.11%201%208c.73%202.89%203.5%205%207%205s6.27-2.11%207-5c-.73-2.89-3.5-5-7-5z'%20stroke='currentColor'%20stroke-width='1.5'%20fill='none'/%3e%3ccircle%20cx='8'%20cy='8'%20r='2.5'%20fill='currentColor'/%3e%3ccircle%20cx='7.2'%20cy='7.2'%20r='0.8'%20fill='white'/%3e%3c/svg%3e",ge={class:"ismismcube-container"},ye={id:"left_part"},we={id:"page_view",title:"此网站的总访量"},ke={id:"online_count",title:"当前在线数"},Le={id:"ismism_main_cube"},Se={id:"show_cube"},Ie=["ism_tag","onMouseenter","onClick"],Ee={id:"show_cube_name"},Ce={id:"show_cube_x"},Me=["ism_tag","onMouseenter","onClick"],xe={id:"ism_info"},Fe=["innerHTML"],Ne={id:"size_adjuster"},ze={id:"right_part"},je=["ism_tag","onMouseover","onClick"],Be={id:"ism_xyz_label_column"},Re=["ism_tag","onMouseover","onClick"],De={id:"ism_xyz_label_row"},Oe=q({__name:"ismismcube",setup(C){const i=E(null),g=["red","green","blue","darkorange"],l=E(1),a=E(0),d=E(1),_=E(""),S=E(0),I=E("");let y=null,w=null;const M=me(),P=ve(),O=()=>{try{y=new WebSocket("wss://"+window.location.host+"/ws/ismismcube_online"),y.addEventListener("open",()=>{console.log("WebSocket连接成功"),w&&(clearTimeout(w),w=null)}),y.addEventListener("message",t=>{try{const o=JSON.parse(t.data);d.value=o.online_count}catch(o){console.error("WebSocket消息解析失败:",o)}}),y.addEventListener("error",t=>{console.error("WebSocket连接错误:",t)}),y.addEventListener("close",t=>{console.log("WebSocket连接关闭:",t.code,t.reason),t.code!==1e3&&(console.log("3秒后尝试重连WebSocket"),w=setTimeout(()=>{O()},3e3))})}catch(t){console.error("WebSocket连接失败:",t),w=setTimeout(()=>{O()},3e3)}},K=()=>{w&&(clearTimeout(w),w=null),y&&(y.close(1e3,"页面卸载"),y=null)},F=t=>{const o=[],e=M.params.ismTag;return e&&t.startsWith(e)&&o.push("pinned"),_.value&&Q(t)&&o.push("searched"),o},k=t=>!i.value||!i.value[t]?"":i.value[t].ch_name.split("/")[0].replace('"','"').replace('"','"'),N=t=>t.length>4?"0.75rem":"1rem",Y=async()=>{try{const t=await fetch("/ism.json");t.ok?(i.value=await t.json(),W()):I.value=`<div style='text-align: center;'>数据加载失败

请检测网络后重试
或
强制重新加载此页面(windows快捷键 Ctrl + F5)</div>`}catch(t){console.error("Failed to load ism.json:",t),I.value=`<div style='text-align: center;'>数据加载失败

请检测网络后重试
或
强制重新加载此页面(windows快捷键 Ctrl + F5)</div>`}try{const t=await fetch("/api/page_view");if(t.ok){const o=await t.json();a.value=o.page_view}}catch(t){console.error("Failed to load page view:",t)}},W=()=>{const t=M.params.ismTag;!t||t===""?(document.title="主义主义魔方",X()):i.value&&i.value[t]&&(document.title="主义主义魔方-"+i.value[t].ch_name,R(t))},z=t=>{R(t);const o=document.querySelectorAll(".ism");for(const e of o){const n=e.getAttribute("ism_tag");n&&n.startsWith(t)&&e.classList.add("selected")}},j=()=>{const t=document.querySelectorAll(".ism");for(const o of t)o.classList.remove("selected");W()},B=t=>{M.params.ismTag===t?P.push("/"):P.push("/"+t)},R=t=>{if(!i.value||!i.value[t])return;const o=i.value[t];let e="<div style='text-align: center;'>";t.length>=1&&(e+=`<p style='display: inline-block;width:${1.1*l.value}rem;height:${1.1*l.value}rem;line-height:${1.1*l.value}rem;color:red;border:solid black ${.1*l.value}rem;'><b>${t[0]}</b></p>`),t.length>=3&&(e+=`-<p style='display: inline-block;width:${1.1*l.value}rem;height:${1.1*l.value}rem;line-height:${1.1*l.value}rem;color:green;border:solid black ${.1*l.value}rem;'><b>${t[2]}</b></p>`),t.length>=5&&(e+=`-<p style='display: inline-block;width:${1.1*l.value}rem;height:${1.1*l.value}rem;line-height:${1.1*l.value}rem;color:blue;border:solid black ${.1*l.value}rem;'><b>${t[4]}</b></p>`),t.length>=7&&(e+=`-<p style='display: inline-block;width:${1.1*l.value}rem;height:${1.1*l.value}rem;line-height:${1.1*l.value}rem;color:darkorange;border:solid black ${.1*l.value}rem;'><b>${t[6]}</b></p>`),e+=`
<b>${o.ch_name}
${o.en_name}</b></div>`;const n=o.axis_list;e+="<div>";let r=0;for(const u of n)e+=`<b style='color:${g[r++]}'>${u.slice(0,3)}</b><p style='display:inline-block;text-align: center;width:${1.1*l.value}rem;height:${1.1*l.value}rem;line-height:${1.1*l.value}rem;border:solid black ${.1*l.value}rem;'><b>${u.slice(3,4)}</b></p>${u.slice(4)}
`;e+="</div><div>";const c=o.feature_list;for(const u of c)u!==""&&(e+=`<b>${u.slice(0,1)}</b>${u.slice(1)}
`);e+="</div><div style='text-align: center;'>";const b=o.related_list;for(const u of b)if(u!==""){const x=u.indexOf("：")+1;u.search("http")===-1?e+=`<b>${u.slice(0,x)}</b>${u.slice(x)}
`:e+=`<b>${u.slice(0,x)}</b><a href='${u.slice(x)}' target='_blank'>${u.slice(x)}</a>
`}e+="</div>",I.value=e,_.value!==""&&G(_.value)},G=t=>{const o=new RegExp(t,"gi");I.value=I.value.replace(o,"<span style='background-color:rgb(225, 172, 39);'>$&</span>")},Q=t=>{if(!i.value||!i.value[t]||_.value==="")return!1;const o=i.value[t],e=new RegExp(_.value,"i");if(o.ch_name.search(e)!==-1||o.en_name.search(e)!==-1)return!0;const n=o.axis_list;for(const b of n)if(b.search(e)!==-1)return!0;const r=o.feature_list;for(const b of r)if(b.search(e)!==-1)return!0;const c=o.related_list;for(const b of c)if(b.search(e)!==-1)return!0;return!1},X=()=>{if(!i.value||!i.value.introduction)return;const t=i.value.introduction;let o="<div>";for(const e of t)o+=e;o+=`
<HR><p style='text-align:center'><a href='https://beian.miit.gov.cn/' target='_blank' style='font-style:normal;text-decoration:none'>京ICP备2024067574号-1</a>
<a href='https://beian.mps.gov.cn/#/query/webSearch?code=11010802044945' target='_blank' style='font-style:normal;text-decoration:none'>京公网安备11010802044945</a><p>`,o+="</div>",I.value=o},Z=()=>{l.value+=.1,document.getElementById("ism_info").style.fontSize=l.value+"rem";const t=M.params.ismTag;t&&t!==""&&R(t)},ee=()=>{l.value-=.1,document.getElementById("ism_info").style.fontSize=l.value+"rem";const t=M.params.ismTag;t&&t!==""&&R(t)},te=()=>{window.open("https://www.maybered.com","_blank")},oe=async()=>{try{const t=await fetch("/ism.json");if(t.ok){const o=await t.blob(),e=URL.createObjectURL(o),n=document.createElement("a");n.href=e,n.download="ism.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(e)}else console.error("Failed to fetch ism.json")}catch(t){console.error("Error downloading ism.json:",t)}},ne=()=>{document.body.style.userSelect="none",document.body.style.pointerEvents="none",document.getElementById("size_indicator").style.pointerEvents="auto",document.getElementById("size_indicator").style.backgroundColor="gray",window.addEventListener("mouseup",D),window.addEventListener("mousemove",T),window.addEventListener("mouseup",H)},D=()=>{document.body.style.userSelect="",document.body.style.pointerEvents="",document.getElementById("size_indicator").style.backgroundColor="rgb(200,200,200)",window.removeEventListener("mouseup",D),window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",H);const t=document.getElementById("left_part"),o=document.getElementById("right_part");t&&o&&(t.classList.contains("left_part_close")?(t.classList.remove("left_part_close"),t.classList.add("left_part_open"),o.classList.remove("right_part_close"),o.classList.add("right_part_open")):(t.classList.add("left_part_close"),t.classList.remove("left_part_open"),o.classList.add("right_part_close"),o.classList.remove("right_part_open")))},T=t=>{window.removeEventListener("mouseup",D);const o=document.getElementById("size_adjuster").offsetHeight;S.value+=t.movementY/o,S.value<0?S.value=0:S.value>1&&(S.value=1)},H=()=>{document.body.style.userSelect="",document.body.style.pointerEvents="",document.getElementById("size_indicator").style.backgroundColor="rgb(200,200,200)",window.removeEventListener("mouseup",D),window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",H)};return le(()=>M.params.ismTag,()=>{W()},{immediate:!0}),re(()=>{document.documentElement.style.fontSize=Math.max(screen.width,screen.height)/96+"px",Y(),O()}),ae(()=>{K()}),(t,o)=>(v(),m(p,null,[o[13]||(o[13]=s("link",{rel:"icon",type:"image/x-icon",href:"@/assets/ismismcube_favicon.ico",style:{display:"none"}},null,-1)),s("div",ge,[s("div",ye,[s("div",we,[o[5]||(o[5]=s("img",{src:he,alt:"page_view"},null,-1)),s("b",null,h(a.value),1)]),s("div",ke,[o[6]||(o[6]=s("p",null,"在线:",-1)),s("b",null,h(d.value),1)]),s("div",{id:"return_button",onClick:te},"更多内容"),s("div",{id:"download_button",onClick:oe},"下载数据"),ce(s("input",{id:"search_input",type:"text",placeholder:"键入检索词","onUpdate:modelValue":o[0]||(o[0]=e=>_.value=e)},null,512),[[ue,_.value]]),s("div",Le,[s("div",Se,[(v(),m(p,null,f(4,e=>(v(),m(p,{key:`show-${e}`},[(v(),m(p,null,f(4,n=>s("div",{key:`${5-e}-${n}`,class:L(["show_xy ism",F(`${5-e}-${n}`)]),style:$({"--x":5-e,"--y":n,"--a":e==1?1:.5,"--b":n==4?1:.5}),ism_tag:`${5-e}-${n}`,onMouseenter:r=>z(`${5-e}-${n}`),onMouseleave:o[1]||(o[1]=r=>j()),onClick:r=>B(`${5-e}-${n}`)},null,46,Ie)),64))],64))),64))]),s("div",Ee,[(v(),m(p,null,f(4,e=>(v(),m(p,{key:`show-name-${e}`},[(v(),m(p,null,f(4,n=>s("div",{key:`show-name-${e}-${n}`,class:"show_xy_name"},[s("p",{class:L(["ism_name",{no_data:i.value&&i.value[`${5-e}-${n}`]&&i.value[`${5-e}-${n}`].en_name===""}]),style:$({fontSize:N(k(`${5-e}-${n}`))})},h(k(`${5-e}-${n}`)),7)])),64))],64))),64))]),(v(),m(p,null,f(4,e=>s("div",{key:`line-x-${e}`,class:"line_x",style:$({"--x":e})},[s("p",null,h(e),1)],4)),64)),(v(),m(p,null,f(4,e=>s("div",{key:`line-y-${e}`,class:"line_y",style:$({"--y":e})},[s("p",null,h(e),1)],4)),64)),s("div",Ce,[(v(),m(p,null,f(4,e=>s("div",{key:`${e}`,class:L(["show_x ism",F(`${5-e}`)]),ism_tag:`${5-e}`,onMouseenter:n=>z(`${5-e}`),onMouseleave:o[2]||(o[2]=n=>j()),onClick:n=>B(`${5-e}`)},[s("p",{class:L(["ism_name",{no_data:i.value&&i.value[`${5-e}`]&&i.value[`${5-e}`].en_name===""}]),style:$({fontSize:N(k(`${5-e}`))})},h(k(`${5-e}`)),7)],42,Me)),64))]),o[7]||(o[7]=s("div",{id:"axis_x"},null,-1)),o[8]||(o[8]=s("div",{id:"axis_y"},null,-1)),o[9]||(o[9]=s("div",{id:"axis_z"},null,-1))]),o[10]||(o[10]=de('<div id="axis_label" data-v-bcfab9e0><p id="axis_label_x" data-v-bcfab9e0>场域论</p><p id="axis_label_y" data-v-bcfab9e0>本体论</p><p id="axis_label_z" data-v-bcfab9e0>认识论</p><p id="axis_label_i" data-v-bcfab9e0>目的论</p></div>',1)),s("div",xe,[s("div",{id:"increase_fontsize_button",onClick:Z}),s("div",{id:"decrease_fontsize_button",onClick:ee}),s("div",{id:"ism_info_content",innerHTML:I.value},null,8,Fe)]),s("div",Ne,[s("div",{id:"size_indicator",onMousedown:ne,style:$({top:S.value*100+"%"})},null,36)])]),s("div",ze,[s("div",{id:"ismism_cube_box",style:$({transform:`scale(${1+S.value*1.5})`})},[(v(),m(p,null,f(4,e=>s("div",{key:`${e}`,class:"ism_x",style:$({"--x":4-e})},[(v(),m(p,null,f(4,n=>s("div",{key:`${e}-${n}`,class:"ism_xy"},[o[11]||(o[11]=s("div",{id:"i"},null,-1)),o[12]||(o[12]=s("div",{id:"z"},null,-1)),(v(),m(p,null,f(4,r=>s("div",{key:`${e}-${n}-${r}`,class:L(["ism_xyz ism",F(`${e}-${n}-${5-r}`)]),style:$({"--z":r}),ism_tag:`${e}-${n}-${5-r}`,onMouseover:c=>z(`${e}-${n}-${5-r}`),onMouseout:o[4]||(o[4]=c=>j()),onClick:c=>B(`${e}-${n}-${5-r}`)},[s("p",{class:L(["ism_name",{no_data:i.value&&i.value[`${e}-${n}-${5-r}`]&&i.value[`${e}-${n}-${5-r}`].en_name===""}]),style:$({fontSize:N(k(`${e}-${n}-${5-r}`))})},h(k(`${e}-${n}-${5-r}`)),7),s("div",Be,h(5-r),1),(v(),m(p,null,f(4,c=>s("div",{key:`${e}-${n}-${5-r}-${c}`,class:L(["ism_xyzi ism",F(`${e}-${n}-${5-r}-${5-c}`)]),style:$({"--i":c}),ism_tag:`${e}-${n}-${5-r}-${5-c}`,onMouseover:A(b=>z(`${e}-${n}-${5-r}-${5-c}`),["stop"]),onMouseout:o[3]||(o[3]=A(b=>j(),["stop"])),onClick:A(b=>B(`${e}-${n}-${5-r}-${5-c}`),["stop"])},[s("p",{class:L(["ism_name",{no_data:i.value&&i.value[`${e}-${n}-${5-r}-${5-c}`]&&i.value[`${e}-${n}-${5-r}-${5-c}`].en_name===""}]),style:$({fontSize:N(k(`${e}-${n}-${5-r}-${5-c}`))})},h(k(`${e}-${n}-${5-r}-${5-c}`)),7),s("div",De,h(5-c),1)],46,Re)),64))],46,je)),64))])),64))],4)),64))],4)])])],64))}}),We={},V=(C,i)=>{const g=C.__vccOpts||C;for(const[l,a]of i)g[l]=a;return g},Te={$style:We},U=V(Oe,[["__cssModules",Te],["__scopeId","data-v-bcfab9e0"]]),He={name:"NotFound",methods:{goHome(){this.$router.push("/")}}};function Ae(C,i,g,l,a,d){return v(),m("div",{class:"not-found",onClick:i[0]||(i[0]=(..._)=>d.goHome&&d.goHome(..._))}," 你所寻找的内容已经遁入实在界荒漠 ")}const Pe=V(He,[["render",Ae],["__scopeId","data-v-9d08820c"]]),Ue=pe({history:_e("/"),routes:[{path:"/",name:"home",component:U},{path:"/:ismTag([1-4]|[1-4]-[1-4]|[1-4]-[1-4]-[1-4]|[1-4]-[1-4]-[1-4]-[1-4])",name:"ismDetail",component:U},{path:"/:pathMatch(.*)*",name:"notFound",component:Pe}]}),J=$e(be);J.use(Ue);J.mount("#app");
